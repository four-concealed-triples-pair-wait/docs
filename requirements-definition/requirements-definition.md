# 要件定義書

# 目的

- webサービスの開発を通して各々のスキルアップ
    - gitを活用したwebサービス開発経験
    - プログラミング言語、フレームワークの開発経験
    - AWS等のクラウドインフラ環境構築経験

- plateauを利用したwebゲームを通してカジュアルに楽しんでもらうこと

# 概要

## システム方式・構成

本システムは、クラウドベースの web アプリケーションとして構築する。 <br>
詳細は他の要件が決定次第詰める。

## 利用者一覧
webサービスにアクセスし、本webサービスをプレイする人。

# 機能要件

<!--
## 余裕があれば対応する要件

- 自動採点・フィードバック機能
  - ユーザーが提出したコードの自動的に評価し、フィードバックを行う。(ChatGPT API 使用) -->

## 1. ユーザ認証
### 1.1 ログイン
- ユーザーはメールアドレスとパスワードを使用してログインすることができる。
- 認証に失敗した場合、エラーメッセージを表示する。
### 1.2 ログアウト
- ユーザーはログアウトできる。
- ログアウト後、サイドバーのユーザー名とアイコンが未ログイン状態に更新される。
### 1.3 ユーザー登録
- 新規ユーザーはメールアドレス、ユーザー名、パスワードを入力してアカウントを作成することができる。
- 登録時の入力バリデーションを実施する。
<!-- - 登録完了時、ユーザーに確認メールを送信する。 -->
### 1.4 パスワード再設定
- ユーザーは、登録したメールアドレスを使用してパスワードを再設定することができる。
- パスワード再設定のリンクは一定時間のみ有効とする。

## 2. ゲームプレイ
### 2.1 ゲームスタート
- ゲーム開始前に難易度を選択できる。詳細は3.1 難易度選択を参照。
- ユーザーは「ゲーム開始」ボタンを押すと、新しいゲームを開始できる。
### 2.2 ゲーム画面
- ゲーム画面は3D表示を行い、ユーザーの操作により視点を変更できる。
- ゲーム画面内には多数のアバターが表示される。
- 目的のキャラクター（「ウォーリー」のようなもの）も画面中にランダムに配置される。
### 2.3 ゲームプレイ中
- ユーザーはplateauを使用して、目的のキャラクターを探し出す必要がある。
- キャラクターを見つけたら、クリックして選択する。
- 正しいキャラクターを選択すると、成功メッセージが表示される。
- 間違ったキャラクターを選択すると、間違いメッセージが表示される。
- プレイ中にゲーム終了、初めからやり直すことができる。

### 2.4 ゲーム終了時
- ゲームを終了時は、ゲームスコアを表示する。
- リトライまたはゲームを終了を選択できる。
## 3. ゲーム設定
### 3.1 難易度選択
- 難易度に応じて、以下のパラメータが変化する。
    - ステージ（渋谷や新宿）
    - キャラクターの配置数
    - 時間帯（夜などは視野が狭くなる。街灯が照らす範囲しか見えないなど）
## 4. スコア・ランキング
### 4.1 スコア計算
- ゲーム完了時にスコアが計算される。ゲームの残り時間、間違いの回数などに基づいてスコアを算出する。
### 4.2 ランキング表示
- ユーザーは自分のスコアとランキングを確認することができる。
- 全ユーザーのトップスコアも表示可能。

## 5. チュートリアル
- ユーザーがゲームのプレイ方法を理解するためのチュートリアルを用意すること

## 6. 画面
### 6.1 ヘッダー
- サービス名, ユーザーアイコン, ランキングページへ遷移するアイコンが表示されること
- ユーザーアイコンを押下して以下の画面遷移リンクが表示される。
    - ログイン
    - ログアウト
    - ユーザー情報

### 6.2 ホーム画面
- ゲーム開始ボタン、チュートリアル開始ボタンが表示されていること。
- ゲーム開始ボタン押下後、難易度を選択できること。
- 難易度を選択後、ゲームプレイ画面へ遷移すること。

### 6.4 ゲームプレイ画面
- 3d都市モデル(plateau)が表示されていること。
- アバターが表示されていること
- 探す目標のキャラクターのイラストが表示されていること。
### 6.3 ログイン画面
- メールアドレス, パスワードがテキストボックスに入力できること。
- 新規登録ボタンが表示されること。
- 新規登録ボタンがクリックされると, ユーザー登録画面に遷移すること
- 「パスワードを忘れた場合は?」のテキストが表示されること
- 「パスワードを忘れた場合は?」のテキストがクリックされると, パスワード再発行画面に遷移すること

### 6.4 ログアウト画面
- ホーム画面へ遷移すること。
- サイドバーのユーザー名とアイコンが未ログイン時のものになっていること

### 6.5 ユーザー登録画面
- ユーザー名, メールアドレス, パスワード, パスワード(確認用) がテキストボックスに入力できること
- 入力値に対してバリデーションし, 異常値に対してテキストボックスの下にアサートすること
    - 例: パスワードとパスワード(確認用)は同じ値であること
- 登録ボタンが表示されること
- 登録ボタンがクリックされると, メールアドレスがユニークであるか検索すること
    - ユニークでない場合, エラーを表示し, ユーザー登録画面から遷移しないこと
    - ユニークである場合, 登録完了画面に遷移すること
    - 登録されたメールアドレスに登録完了メールを送信すること
        - 登録完了メールの本文にはユーザー名を含むこと

### 6.6 登録完了画面
  - 「ユーザー登録が完了しました」と表示されること
  - 表示された 5 秒後に学習画面に遷移すること
  
### 6.7 パスワード再発行画面
- メールアドレスがテキストボックスに入力できること
- 送信ボタンが表示されること
- 送信ボタンがクリックされると, メールアドレスが登録済みであるか検索すること
    - 登録済みでない場合, エラーを表示し, パスワード再発行画面から遷移しないこと
    - 登録済みである場合, パスワード再設定メール送信完了画面に遷移すること
    - 入力されたメールアドレスにパスワード再設定用ページの URL を送信すること

### 6.8 パスワード再発行メール送信完了画面
- 「パスワード再設定用ページの URL を送信しました」と表示されること

### 6.9 パスワード再設定画面
- パスワード再発行メールの URL からのみ遷移すること
- パスワード, パスワード(確認用) がテキストボックスに入力できること
- 入力値に対してバリデーションし, 異常値に対してテキストボックスの下にアサートすること
    - 例. パスワードとパスワード(確認用)は同じ値であること
- 登録ボタンが表示されること
- 登録ボタンがクリックされると, パスワード再設定完了画面に遷移すること
    - 登録されたメールアドレスに再設定完了メールを送信すること
    - 再設定完了メールの本文にはユーザー名を含むこと
### 6.10 パスワード再設定完了画面
- 「パスワードの再設定が完了しました」と表示されること
- 表示された 5 秒後にホーム画面に遷移すること
- コースで受講できるコンテンツが表示されること
- コース名とコースの進捗率が表示されること
- 各コンテンツの最終受講日が表示されること
- 完了済みコンテンツと未完了コンテンツを色分けすること
- コンテンツがクリックされると学習画面に遷移し, ソースコードが読み込まれた状態で表示されること
- ユーザーが受講したコース, コースの進捗率, 学習時間が表示されること
- 学習時間はコースのコースのカテゴリごとに色分けして円グラフで表示すること

### 6.11 ユーザー情報画面

:TBD
## 情報・データ

<!-- - ユーザー情報（ID, パスワード, メールアドレス, 学習進捗等）
- コース情報（コース名, 内容, 関連する 3D モデル等）
- 学習記録（ユーザー ID, コース ID, 学習時間等） -->